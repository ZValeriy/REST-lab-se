# Шаг 3. Генерация кода приложения (FastAPI)
## Задание на лабораторную работу
- С помощью LLM сгенерируйте код обработчиков методов на Python по вашей OpenAPI‑спецификации.
- Скопируйте `docker-compose.yaml` из шага 2 в директорию `steps/step_3/execution`.
- Добавьте в `docker-compose.yaml` сервис FastAPI.
- Запустите проект.
- Откройте http://localhost:8000/docs и проверьте работу сервиса.
## Пример выполнения
### Подготовительный этап
Для начала мы создадим Dockerfile и дополним docker-compose файл, чтобы запустилось наше приложение.
Создадим в директории [Dockerfile](./Dockerfile) и заполним его. 
Затем добавим в [docker-compose.yaml](./docker-compose.yaml) сервис, в котором будет обработчик.
После этого создадим директорию app
### Генерация из OpenAPI без LLM
Существуют утилиты для генерации заглушек контроллеров из OpenAPI-спецификации (без бизнес‑логики). Это помогает избежать ошибок в сигнатурах. В этой работе используем LLM, чтобы сразу получить рабочие обработчики.
### Генерация с помощью LLM
Возьмём [промпт для генерации кода](./prompt.txt), вставим свою спецификацию OpenAPI и отправим в LLM.
Создадим директорию app, в неё добавим все необходимые файлы, которые сгенерирует LLM (requirements.txt, models.py, main.py, services.py).
Запустим проект с помощью выполнения в консоли команды 
```bash
docker-compose up -d --build
```
Перейдём на http://localhost:8000/docs и проверим работоспособность приложения. Если страница не открывается, посмотрите логи и исправьте проблему (самостоятельно или с помощью LLM):
```bash
docker-compose logs fastapi-app

## Контрольные вопросы
- Как вы реализовали базовую аутентификацию (Basic Auth) в FastAPI?
- Где в коде расположены модели, бизнес‑логика и контроллеры?
- Как обрабатываются ошибки валидации и конфликты (400/409)?
- Как обеспечить соответствие эндпоинтов спецификации OpenAPI?
- Какие тесты вы бы написали для проверки контрактов?
```
